DotNet Core Documentation:

For Install:
wget https://packages.microsoft.com/config/ubuntu/19.10/packages-microsoft-prod.deb -O packages-microsoft-prod.deb
sudo dpkg -i packages-microsoft-prod.deb
sudo apt-get update
sudo apt-get install apt-transport-https
sudo apt-get update
sudo apt-get install dotnet-sdk-3.1

dotnet tool install --global dotnet-ef --version 2.2

Force SDK 2.2:
wget -q https://packages.microsoft.com/config/ubuntu/18.04/prod.list
sudo mv prod.list /etc/apt/sources.list.d/microsoft-prod.list
sudo apt update
sudo add-apt-repository universe
sudo apt-get install apt-transport-https
sudo apt-get update
sudo apt-get install dotnet-sdk-2.2

------------------------------------------------------------------------------------------------------------

Commands DotNet Core:
dotnet restore (recupera pacotes nuget)
dotnet build (verifica erros)
dotnet run (roda o app)
dotnet new web (cria um novo aplicativo web)
dotnet watch run (ele fica olhando os .cs na pasta, se houver alteração, ele para e executa de novo)

Publish de Aplicação:
Baseado Solution: dotnet publish -c Release -r win-x64 --output ./MobileControl.Publish MobileControl.sln
Baseado Projeto: dotnet publish -c Release -r win-x64 --output ../MobileControl.Publish MobileControl.Api.csproj

------------------------------------------------------------------------------------------------------------

Commands to Create Projects, Create Solution File and Link Everything (Building an entire project):

mkdir BackEnd
cd BackEnd
mkdir AppFullStackDemo.Domain
mkdir AppFullStackDemo.Domain.Tests
mkdir AppFullStackDemo.Shared
mkdir AppFullStackDemo.Infra
mkdir AppFullStackDemo.Api
cd AppFullStackDemo.Domain
dotnet new classlib
cd ..
cd AppFullStackDemo.Domain.Tests
dotnet new mstest
cd ..
cd AppFullStackDemo.Shared
dotnet new classlib
cd ..
cd AppFullStackDemo.Infra
dotnet new classlib
cd ..
cd AppFullStackDemo.Api
dotnet new webapi
cd ..
dotnet new sln
dotnet sln add ./AppFullStackDemo.Domain/
dotnet sln add ./AppFullStackDemo.Domain.Tests/
dotnet sln add ./AppFullStackDemo.Shared/
dotnet sln add ./AppFullStackDemo.Infra/
dotnet sln add ./AppFullStackDemo.Api/
dotnet build
cd AppFullStackDemo.Api
dotnet add reference ../AppFullStackDemo.Domain/
dotnet add reference ../AppFullStackDemo.Infra/
cd ..
cd AppFullStackDemo.Infra
dotnet add reference ../AppFullStackDemo.Domain/
cd ..
cd AppFullStackDemo.Domain.Tests
dotnet add reference ../AppFullStackDemo.Domain/
cd ..
cd AppFullStackDemo.Api
dotnet add package Microsoft.EntityFrameworkCore.Design (also needs on API, else migrations do not run)
cd ..
cd AppFullStackDemo.Infra
dotnet add package Microsoft.EntityFrameworkCore --version 3.1.3
dotnet add package Microsoft.EntityFrameworkCore.Relational
dotnet add package Microsoft.EntityFrameworkCore.Design
dotnet add package Newtonsoft.Json
dotnet add package Microsoft.AspNetCore.Mvc.NewtonsoftJson


Note, after the First Push i did 2 gitignores to ignore some files with my connectionstrings. On the END
of the project (last deploy) i need to include then again (with fake-connectionstrings) to works:

git rm --cached appsettings.json (on API folder)
git rm --cached AppFullStackDemoContext.cs (on Infra > Context folder)

And also added those files to gitignore file on the end:
*.appsettings.json
src/BackEnd/AppFullStackDemo.Api/appsettings.json
appsettings.json
*.AppFullStackDemoContext.cs
src/BackEnd/AppFullStackDemo.Infra/Context/AppFullStackDemoContext.cs
*.AppFullStackDemoContext

------------------------------------------------------------------------------------------------------------

Commands EF Core:
dotnet ef --startup-project ../AssetsControl.Api/ migrations add FirstBase (na pasta Infra)
dotnet ef --startup-project ../AssetsControl.Api/ database update (na pasta Infra) OU
dotnet ef database update (na pasta API)
dotnet ef migrations remove

------------------------------------------------------------------------------------------------------------
Fixes for Linux:

sudo sysctl fs.inotify.max_user_watches=1024 (default watch files was 128, increase it because VSCode needs
to watch more files of the project)

cat /proc/sys/fs/inotify/max_user_watches (vai mostrar quantos arquivos pode monitorar)
sudo nano /etc/sysctl.conf (and past the line below on the end of the file)
fs.inotify.max_user_watches=524288
sudo sysctl -p (to reload)
